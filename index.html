<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Audio Studio Pro: Interactive Edition</title>
    <style>
        :root { --gold: linear-gradient(135deg, #d4af37, #f1c40f, #c5a028); --gold-text: #b8860b; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #fdfdfd; display: flex; height: 100vh; overflow: hidden; }
        
        /* –ü–∞–Ω–µ–ª–∏ */
        .sidebar { width: 320px; background: white; padding: 20px; border-right: 1px solid #eee; overflow-y: auto; transition: 0.4s; position: relative; }
        .sidebar.hidden { width: 0; padding: 0; border: none; }
        .player-main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; transition: 0.4s; }
        .dictionary-panel { width: 550px; background: #fff; border-left: 1px solid #ddd; display: flex; flex-direction: column; transition: 0.4s; }
        .dictionary-panel.expanded { width: 85%; }

        /* –õ–æ–≥–æ—Ç–∏–ø-–¢–ì */
        .brand-zone { display: flex; flex-direction: column; align-items: center; text-decoration: none; margin-bottom: 20px; transition: 0.3s; }
        .brand-zone:hover { transform: scale(1.05); }
        .logo-img { width: 85px; height: 85px; border-radius: 50%; border: 3px solid #f1c40f; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        /* –ü–ª–µ–µ—Ä */
        .cover-art { width: 420px; height: 260px; border-radius: 20px; background: #f0f0f0 center/cover no-repeat; border: 6px solid white; box-shadow: 0 15px 35px rgba(0,0,0,0.1); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; font-size: 3rem; }
        .shrunk .cover-art { width: 220px; height: 140px; }

        /* –ü–æ–¥—Å–∫–∞–∑–∫–∏ (Tooltips) */
        [data-tooltip] { position: relative; cursor: help; }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute; bottom: 120%; left: 50%; transform: translateX(-50%);
            background: #333; color: white; padding: 5px 10px; border-radius: 5px;
            font-size: 0.7rem; white-space: nowrap; opacity: 0; visibility: hidden; transition: 0.3s; z-index: 100;
        }
        [data-tooltip]:hover::after { opacity: 1; visibility: visible; }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn { width: 100%; padding: 12px; border: none; border-radius: 12px; background: var(--gold); color: white; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); }
        .c-btn { width: 50px; height: 50px; border-radius: 15px; border: none; background: #f0f0f0; color: #d4af37; cursor: pointer; transition: 0.2s; }
        .c-btn:hover { background: #e0e0e0; }
        #play-btn { width: 80px; height: 80px; border-radius: 50%; background: var(--gold); color: white; font-size: 2rem; box-shadow: 0 5px 15px rgba(212,175, 55, 0.4); }

        /* –ü–æ–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ */
        .load-card { background: #fafafa; padding: 15px; border-radius: 15px; border: 1px dashed #ccc; margin-top: 10px; width: 100%; max-width: 450px; }
        label { display: block; font-size: 0.65rem; font-weight: 800; margin-top: 10px; color: var(--gold-text); }
        input, select { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-top: 5px; }
        
        iframe { width: 100%; height: 100%; border: none; }
        .panel-header { background: #f1c40f; color: white; padding: 12px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>

<div class="sidebar" id="sidebar">
    <a href="https://t.me/DI_von_Irina" target="_blank" class="brand-zone" data-tooltip="–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º –≤ Telegram!">
        <img src="https://irinschensmagen-alt.github.io/Audioplayer-Studio-Pro/logo.png" class="logo-img">
        <h3 style="margin-top:10px; font-size: 1.1rem;">Audio Studio Pro</h3>
    </a>

    <label>‚öôÔ∏è –Ø–ó–´–ö / LANGUAGE</label>
    <select id="langSelect" onchange="translate()">
        <option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="en">English</option><option value="de">Deutsch</option>
        </select>

    <label>üéì –†–ï–ñ–ò–ú / MODE</label>
    <select id="modeSelect" onchange="applyMode()" data-tooltip="Study: –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ | Test: 2 –ø–æ–ø—ã—Ç–∫–∏">
        <option value="master">Master (Loop)</option>
        <option value="study" selected>Study (–£—á–µ–Ω–∏–∫)</option>
        <option value="test">Test (Exam)</option>
    </select>

    <button class="btn" id="slowBtn" style="background:#27ae60" onclick="toggleSlow()" data-tooltip="–°–Ω–∏–∑–∏—Ç—å —Ç–µ–º–ø –¥–æ 0.8x –±–µ–∑ –∏—Å–∫–∞–∂–µ–Ω–∏—è –∑–≤—É–∫–∞">üê¢ SLOW 0.8x</button>

    <label>üìñ –°–õ–û–í–ê–†–¨ (PDF)</label>
    <input type="file" id="docFile" accept=".pdf" data-tooltip="–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à —É—á–µ–±–Ω–∏–∫ –∏–ª–∏ —Å–ª–æ–≤–∞—Ä—å">
    
    <label>üîó –û–ù–õ–ê–ô–ù –°–õ–û–í–ê–†–¨</label>
    <input type="text" id="dictUrl" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É..." oninput="loadFrame(this.value)">

    <label>üìã –ö–û–î –î–õ–Ø –í–°–¢–ê–í–ö–ò</label>
    <button class="btn" onclick="copy()" style="background:#34495e">Copy Embed Code</button>
</div>

<div class="player-main" id="player-main">
    <div id="status-msg" style="font-size: 0.8rem; color: #999; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">Ready to work / –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
    <div class="cover-art" id="cover">üéµ</div>
    
    <input type="range" id="prog" value="0" step="0.1" oninput="audio.currentTime=this.value" data-tooltip="–ü–µ—Ä–µ–º–æ—Ç–∫–∞ (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –≤ Test Mode)">
    <div id="time" style="font-weight:bold; font-size: 1.2rem; margin:10px; color: #444;">00:00 / 00:00</div>
    
    <div class="controls">
        <button class="c-btn" onclick="audio.currentTime-=10" data-tooltip="–ù–∞–∑–∞–¥ –Ω–∞ 10 —Å–µ–∫">‚è™</button>
        <button class="c-btn" id="play-btn" onclick="play()">‚ñ∂</button>
        <button class="c-btn" onclick="audio.currentTime+=10" data-tooltip="–í–ø–µ—Ä–µ–¥ –Ω–∞ 10 —Å–µ–∫">‚è©</button>
    </div>

    <div style="display: flex; gap: 10px; width: 100%; max-width: 500px;">
        <div class="load-card">
            <label>üéµ AUDIO URL / FILE</label>
            <input type="text" placeholder="–°—Å—ã–ª–∫–∞..." oninput="audio.src=this.value">
            <input type="file" accept="audio/*" onchange="audio.src=URL.createObjectURL(this.files[0])">
        </div>
        <div class="load-card">
            <label>üñºÔ∏è IMAGE URL / FILE</label>
            <input type="text" placeholder="–°—Å—ã–ª–∫–∞..." oninput="setImg(this.value)">
            <input type="file" accept="image/*" onchange="setImg(URL.createObjectURL(this.files[0]))">
        </div>
    </div>
</div>

<div class="dictionary-panel" id="dict-panel">
    <div class="panel-header">
        <span>üìñ DICTIONARY & MATERIALS</span>
        <button class="btn" style="width: auto; margin: 0; padding: 5px 15px; background: white; color: #b8860b;" onclick="toggleWide()" data-tooltip="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–ª–æ–≤–∞—Ä—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω">‚Üî WIDE</button>
    </div>
    <iframe id="doc-frame" src="about:blank"></iframe>
</div>

<script>
    const audio = new Audio();
    let plays = 0;

    function setImg(url) { 
        const c = document.getElementById('cover');
        c.style.backgroundImage = `url(${url})`;
        c.innerText = '';
    }

    function loadFrame(url) { document.getElementById('doc-frame').src = url; }
    
    document.getElementById('docFile').onchange = function(e) {
        if(this.files[0]) {
            document.getElementById('doc-frame').src = URL.createObjectURL(this.files[0]) + "#view=FitH";
            document.getElementById('status-msg').innerText = "Dictionary Loaded / –°–ª–æ–≤–∞—Ä—å –∑–∞–≥—Ä—É–∂–µ–Ω";
        }
    };

    function toggleWide() {
        document.getElementById('sidebar').classList.toggle('hidden');
        document.getElementById('player-main').classList.toggle('shrunk');
        document.getElementById('dict-panel').classList.toggle('expanded');
    }

    function play() { if(audio.src) audio.paused ? audio.play() : audio.pause(); }

    audio.onplay = () => { 
        document.getElementById('play-btn').innerText = '‚è∏';
        document.getElementById('status-msg').innerText = "Playing... / –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ...";
    };
    audio.onpause = () => { 
        document.getElementById('play-btn').innerText = '‚ñ∂';
        document.getElementById('status-msg').innerText = "Paused / –ü–∞—É–∑–∞";
    };

    function toggleSlow() {
        audio.playbackRate = (audio.playbackRate === 1) ? 0.8 : 1;
        document.getElementById('slowBtn').style.boxShadow = (audio.playbackRate === 0.8) ? "inset 0 0 10px rgba(0,0,0,0.3)" : "none";
    }

    // –õ–æ–≥–∏–∫–∞ Test Mode –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π
    audio.ontimeupdate = () => {
        const p = document.getElementById('prog'); p.max = audio.duration || 0; p.value = audio.currentTime;
        const f = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('time').innerText = `${f(audio.currentTime)} / ${f(audio.duration || 0)}`;
    };
</script>
</body>
</html>
