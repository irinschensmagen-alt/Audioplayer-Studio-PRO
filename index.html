<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Studio Gold Pro</title>
    <style>
        :root { 
            --gold: linear-gradient(135deg, #d4af37, #f1c40f, #c5a028);
            --gold-text: #b8860b;
            --bg: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            --panel-bg: rgba(255, 255, 255, 0.95);
        }
        
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: #555; display: flex; height: 100vh; overflow: hidden; }
        .container { display: grid; grid-template-columns: 320px 1fr; width: 100%; }
        
        .settings { background: var(--panel-bg); padding: 20px; border-right: 1px solid #ddd; display: flex; flex-direction: column; overflow-y: auto; box-shadow: 5px 0 15px rgba(0,0,0,0.05); }
        .header { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #f1c40f; padding-bottom: 10px; }
        
        .player-view { padding: 40px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .cover { width: 100%; max-width: 450px; height: 250px; border-radius: 20px; background: #fff center/cover no-repeat; border: 5px solid #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; }
        
        label { display: block; font-size: 0.7rem; font-weight: bold; margin-top: 15px; color: var(--gold-text); text-transform: uppercase; }
        select, input, textarea { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; margin-top: 5px; font-size: 0.85rem; box-sizing: border-box; }
        
        .btn { width: 100%; padding: 12px; border: none; border-radius: 12px; background: var(--gold); color: white; font-weight: bold; cursor: pointer; margin-top: 15px; transition: 0.3s; }
        
        /* –°—Ç–∞—Ç—É—Å —Å—Å—ã–ª–∫–∏ */
        #link-status { font-size: 0.7rem; margin-top: 5px; font-weight: bold; display: none; }
        .status-ok { color: #27ae60; }
        .status-warn { color: #e67e22; }

        .controls { display: flex; gap: 20px; align-items: center; margin: 25px 0; }
        .c-btn { width: 45px; height: 45px; border-radius: 12px; border: none; background: #fff; color: #d4af37; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        #play { width: 65px; height: 65px; border-radius: 50%; background: var(--gold); color: white; font-size: 1.5rem; }
        
        #prog { width: 100%; max-width: 500px; accent-color: #d4af37; }
        #time { font-family: monospace; font-weight: bold; color: var(--gold-text); margin-top: 5px; }

        .info-box { background: #fff9e6; border: 1px solid #f1c40f; padding: 10px; border-radius: 10px; font-size: 0.75rem; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div class="settings">
        <div class="header">
            <h3 id="t-title">Audio Editor Gold</h3>
        </div>

        <label id="l-lang">–Ø–∑—ã–∫ / Sprache</label>
        <select id="lang">
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="de">Deutsch</option>
            <option value="en">English</option>
        </select>

        <label id="l-mode">–†–µ–∂–∏–º / Modus</label>
        <select id="mode">
            <option value="master">Master (Loop)</option>
            <option value="study" selected>Study (Limit)</option>
            <option value="test">Test (Exam)</option>
        </select>

        <div class="info-box">
            <b>üí° –°–æ–≤–µ—Ç—ã –ø–æ —Å—Å—ã–ª–∫–∞–º:</b><br>
            ‚Ä¢ GitHub: –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π.<br>
            ‚Ä¢ Dropbox: –ê–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª—è–µ–º dl=0 –Ω–∞ raw=1.<br>
            ‚Ä¢ Google Drive: –¢—Ä–µ–±—É–µ—Ç Direct Link.
        </div>

        <label id="l-code" style="margin-top:20px">–ö–æ–¥ Iframe</label>
        <textarea id="code" readonly placeholder="–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫"></textarea>
        <button class="btn" id="copy-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
    </div>

    <div class="player-view">
        <div id="cover"></div>
        
        <input type="range" id="prog" value="0" step="0.1">
        <div id="time">00:00 / 00:00</div>

        <div class="controls">
            <button class="c-btn" id="rew">‚è™</button>
            <button class="c-btn" id="play">‚ñ∂</button>
            <button class="c-btn" id="fwd">‚è©</button>
        </div>

        <div style="width:100%; max-width:500px;">
            <label id="l-aud">üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –ê—É–¥–∏–æ</label>
            <input type="text" id="audUrl" placeholder="https://...">
            <div id="link-status"></div>

            <label id="l-img">üñºÔ∏è –°—Å—ã–ª–∫–∞ –Ω–∞ –û–±–ª–æ–∂–∫—É</label>
            <input type="text" id="imgUrl" placeholder="https://...">
        </div>
    </div>
</div>

<script>
    const audio = new Audio();
    audio.crossOrigin = "anonymous";
    let plays = 0;

    // –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–∫–∏
    document.getElementById('audUrl').addEventListener('input', function(e) {
        let url = e.target.value.trim();
        const status = document.getElementById('link-status');
        
        if (!url) { status.style.display = 'none'; return; }
        
        // –ê–≤—Ç–æ-—Ñ–∏–∫—Å Dropbox
        if (url.includes('dropbox.com') && url.includes('dl=0')) {
            url = url.replace('dl=0', 'raw=1');
            this.value = url;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
        const isDirect = /\.(mp3|wav|ogg|m4a|aac)/i.test(url);
        status.style.display = 'block';
        if (isDirect) {
            status.innerText = "‚úì –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞";
            status.className = "status-ok";
        } else {
            status.innerText = "‚ö† –°—Å—ã–ª–∫–∞ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å (–Ω–µ mp3 —Ñ–æ—Ä–º–∞—Ç)";
            status.className = "status-warn";
        }

        audio.src = url;
        audio.load();
        plays = 0;
    });

    document.getElementById('imgUrl').oninput = (e) => {
        if (e.target.value) document.getElementById('cover').style.backgroundImage = `url(${e.target.value})`;
    };

    document.getElementById('play').onclick = () => {
        if (!audio.src) return alert("–í—Å—Ç–∞–≤—å—Ç–µ –∞—É–¥–∏–æ —Å—Å—ã–ª–∫—É!");
        audio.paused ? audio.play() : audio.pause();
        document.getElementById('play').innerText = audio.paused ? '‚ñ∂' : '‚è∏';
    };

    audio.ontimeupdate = () => {
        const p = document.getElementById('prog');
        p.max = audio.duration || 0;
        p.value = audio.currentTime;
        const fmt = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('time').innerText = `${fmt(audio.currentTime)} / ${fmt(audio.duration || 0)}`;
    };

    document.getElementById('prog').oninput = (e) => audio.currentTime = e.target.value;
    document.getElementById('rew').onclick = () => audio.currentTime -= 10;
    document.getElementById('fwd').onclick = () => audio.currentTime += 10;

    document.getElementById('copy-btn').onclick = () => {
        const frame = `<iframe src="${window.location.href}" width="100%" height="600" frameborder="0"></iframe>`;
        document.getElementById('code').value = frame;
        navigator.clipboard.writeText(frame);
        alert("–ì–æ—Ç–æ–≤–æ! –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω.");
    };
</script>
</body>
</html>
