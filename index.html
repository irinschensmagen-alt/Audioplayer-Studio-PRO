<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AUDIO STUDIO PRO | ALL CLIPS WORKING</title>
    <style>
        :root { 
            --gold-line: #d4af37;
            --gold-grad: linear-gradient(135deg, #e5c064 0%, #f9e1a9 50%, #d4af37 100%);
            --sidebar-bg: #fcfdfe;
            --text-main: #1a4a7a;
            --accent-gold: #b8860b;
        }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--sidebar-bg); display: flex; height: 100vh; overflow: hidden; color: var(--text-main); }

        /* –®–¢–û–†–ö–ò (500px) */
        .drawer { position: fixed; right: -515px; top: 0; width: 500px; height: 100%; background: white; transition: right 0.4s ease; box-shadow: -10px 0 25px rgba(0,0,0,0.1); z-index: 100; }
        .drawer-mat { z-index: 110; border-left: 4px solid #5da9e1; }
        .drawer-dict { border-left: 3px solid var(--gold-line); }
        body.dict-open .drawer-dict { right: 0; }
        body.mat-open .drawer-mat { right: 0; }
        .drawer iframe { width: 100%; height: 100%; border: none; display: block; }

        .drawer-triggers { position: fixed; right: 0; top: 40%; display: flex; flex-direction: column; gap: 10px; z-index: 120; }
        .t-btn { width: 45px; height: 60px; border: none; border-radius: 12px 0 0 12px; cursor: pointer; color: white; font-size: 1.4rem; display: flex; align-items: center; justify-content: center; }

        /* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ */
        .sidebar-left { width: 310px; border-right: 1px solid #ddd; padding: 20px; display: flex; flex-direction: column; gap: 12px; background: white; overflow-y: auto; flex-shrink: 0; }
        .player-zone { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle at 30% 20%, #ffffff 0%, #f4faff 45%, #eef8ff 100%); transition: margin-right 0.4s; }
        body.dict-open .player-zone, body.mat-open .player-zone { margin-right: 500px; }

        .card { border: 2px solid var(--gold-line); border-radius: 15px; padding: 10px; background: white; margin-bottom: 5px; }
        label { font-size: 0.7rem; font-weight: 900; color: var(--accent-gold); display: block; margin-bottom: 4px; text-transform: uppercase; }
        
        .input-row { display: flex; align-items: center; gap: 5px; background: #f9f9f9; padding: 5px 10px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 5px; position: relative; height: 32px; }
        input, select { border: none; background: transparent; width: 100%; outline: none; font-size: 0.85rem; font-weight: bold; color: var(--text-main); }

        .go-btn { background: none; border: none; cursor: pointer; font-size: 1.1rem; color: var(--gold-line); padding: 0; display: flex; align-items: center; }
        .x-btn { color: #ff8e8e; border: none; background: none; cursor: pointer; font-weight: bold; font-size: 1rem; }

        /* –ü–õ–ï–ï–† */
        .cover { width: 400px; height: 225px; border-radius: 20px; border: 3px solid var(--gold-line); background: white; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; font-size: 4rem; background-size: cover; background-position: center; }
        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 85%; margin-top: 20px; }
        .file-text { font-size: 0.8rem; color: #78a1c4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex: 1; }
    </style>
</head>
<body class="dict-open">

<div class="drawer-triggers">
    <button class="t-btn" style="background:var(--gold-grad)" onclick="toggleDrawer('dict')">üìñ</button>
    <button class="t-btn" style="background:#5da9e1" onclick="toggleDrawer('mat')">üìÇ</button>
</div>

<div class="sidebar-left">
    <div style="text-align:center"><img src="https://irinschensmagen-alt.github.io/Audioplayer-Studio-Pro/logo.png" style="width:60px; margin-bottom:10px;"></div>
    <div class="card"><label id="l-lang"></label><select id="langSelect" onchange="updateUI()"></select></div>
    
    <div class="card">
        <label id="l-mat"></label>
        <div class="input-row">
            <input type="text" id="u-mat" placeholder="Link" onkeypress="if(event.key==='Enter') setMat(this.value)"> 
            <button class="go-btn" title="Load Link" onclick="setMat(document.getElementById('u-mat').value)">üìé</button> 
            <button class="x-btn" onclick="clearMat()">‚úñ</button>
        </div>
        <div class="input-row">
            <input type="file" style="position:absolute; opacity:0; width:100%; cursor:pointer" onchange="handleFile(this,'mat')">
            <span id="f-mat-n" class="file-text">üìÅ</span>
            <button class="x-btn" onclick="clearMat()">‚úñ</button>
        </div>
    </div>

    <div class="card"><label id="l-mode"></label><select id="modeSelect"><option value="study" id="opt-study"></option><option value="master" id="opt-master"></option><option value="test" id="opt-test"></option></select></div>
    
    <button style="background:#5da9e1; color:white; border:none; padding:10px; border-radius:12px; font-weight:900; margin-bottom:10px; cursor:pointer;">üê¢ <span id="l-slow"></span></button>

    <div class="card">
        <label id="l-dict"></label>
        <div class="input-row">
            <input type="text" id="u-dict" placeholder="Link" onkeypress="if(event.key==='Enter') setDict(this.value)">
            <button class="go-btn" title="Load Dict" onclick="setDict(document.getElementById('u-dict').value)">üìé</button>
            <button class="x-btn" onclick="resetDict()">‚úñ</button>
        </div>
    </div>
</div>

<div class="drawer drawer-dict"><iframe id="dict-frame"></iframe></div>
<div class="drawer drawer-mat"><iframe id="mat-frame"></iframe></div>

<div class="player-zone">
    <div class="cover" id="cover">‚ô´</div>
    <input type="range" id="prog" style="width:400px; accent-color:var(--gold-line); margin-bottom:15px;">
    
    <div class="grid-inputs">
        <div class="card">
            <label id="l-aud"></label>
            <div class="input-row">
                <input type="text" id="u-aud-main" placeholder="Audio Link" onkeypress="if(event.key==='Enter') setAudio(this.value)"> 
                <button class="go-btn" onclick="setAudio(document.getElementById('u-aud-main').value)">üìé</button>
                <button class="x-btn" onclick="document.getElementById('u-aud-main').value=''">‚úñ</button>
            </div>
            <div class="input-row">
                <input type="file" accept="audio/*" style="position:absolute; opacity:0; width:100%; cursor:pointer" onchange="handleFile(this,'aud')">
                <span id="f-aud-n" class="file-text">üìÅ</span>
                <button class="x-btn" onclick="clearInp('f-aud-n')">‚úñ</button>
            </div>
        </div>
        <div class="card">
            <label id="l-img"></label>
            <div class="input-row">
                <input type="text" id="u-img-main" placeholder="Image Link" onkeypress="if(event.key==='Enter') setImg(this.value)"> 
                <button class="go-btn" onclick="setImg(document.getElementById('u-img-main').value)">üìé</button>
                <button class="x-btn" onclick="document.getElementById('u-img-main').value=''">‚úñ</button>
            </div>
            <div class="input-row">
                <input type="file" accept="image/*" style="position:absolute; opacity:0; width:100%; cursor:pointer" onchange="handleFile(this,'img')">
                <span id="f-img-n" class="file-text">üìÅ</span>
                <button class="x-btn" onclick="clearInp('f-img-n')">‚úñ</button>
            </div>
        </div>
    </div>
</div>

<script>
    const DEFAULT_DICT = "https://www.wiktionary.org/";
    const audioObj = new Audio();
    const langs = {
        ru: { n:"–†—É—Å—Å–∫–∏–π", l:"–Ø–∑—ã–∫", m:"–ú–∞—Ç–µ—Ä–∏–∞–ª—ã", md:"–†–µ–∂–∏–º", d:"–°–ª–æ–≤–∞—Ä—å URL", s:"–£—á–µ–Ω–∏–∫", ms:"–ú–∞—Å—Ç–µ—Ä", t:"–¢–µ—Å—Ç", a:"–ê—É–¥–∏–æ", i:"–ö–∞—Ä—Ç–∏–Ω–∫–∞", f:"–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª", sl:"–ó–∞–º–µ–¥–ª–µ–Ω–∏–µ 0.8x" },
        de: { n:"Deutsch", l:"Sprache", m:"Materialien", md:"Modus", d:"W√∂rterbuch URL", s:"Lerner", ms:"Meister", t:"Test", a:"Audio", i:"Bild", f:"Datei w√§hlen", sl:"Tempo 0.8x" },
        en: { n:"English", l:"Language", m:"Materials", md:"Mode", d:"Dictionary URL", s:"Study", ms:"Master", t:"Test", a:"Audio", i:"Image", f:"Choose File", sl:"Slow 0.8x" },
        ja: { n:"Êó•Êú¨Ë™û", l:"Ë®ÄË™û", m:"ÊïôÊùê", md:"„É¢„Éº„Éâ", d:"ËæûÊõ∏URL", s:"Â≠¶Áøí", ms:"„Éû„Çπ„Çø„Éº", t:"„ÉÜ„Çπ„Éà", a:"Èü≥Â£∞", i:"ÁîªÂÉè", f:"„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû", sl:"„Çπ„É≠„Éº 0.8x" },
        pt: { n:"Portugu√™s", l:"Idioma", m:"Materiais", md:"Modo", d:"Dicion√°rio URL", s:"Estudo", ms:"Mestre", t:"Teste", a:"√Åudio", i:"Imagem", f:"Escolher arquivo", sl:"Lento 0.8x" },
        zh: { n:"‰∏≠Êñá", l:"ËØ≠Ë®Ä", m:"ÊùêÊñô", md:"Ê®°Âºè", d:"ËØçÂÖ∏URL", s:"Â≠¶‰π†", ms:"Â§ßÂ∏à", t:"ÊµãËØï", a:"Èü≥È¢ë", i:"ÂõæÁâá", f:"ÈÄâÊã©Êñá‰ª∂", sl:"ÊÖ¢ÈÄü 0.8x" },
        fa: { n:"ŸÅÿßÿ±ÿ≥€å", l:"ÿ≤ÿ®ÿßŸÜ", m:"ŸÖŸàÿßÿØ", md:"ÿ≠ÿßŸÑÿ™", d:"ŸÑ€åŸÜ⁄© ÿØ€å⁄©ÿ¥ŸÜÿ±€å", s:"ŸÖÿ∑ÿßŸÑÿπŸá", ms:"ÿßÿ≥ÿ™ÿßÿØ", t:"ÿ™ÿ≥ÿ™", a:"ÿµŸàÿ™€å", i:"ÿ™ÿµŸà€åÿ±", f:"ÿßŸÜÿ™ÿÆÿßÿ® ŸÅÿß€åŸÑ", sl:"ÿ¢Ÿáÿ≥ÿ™Ÿá €∞.€∏x" },
        hi: { n:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä", l:"‡§≠‡§æ‡§∑‡§æ", m:"‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä", md:"–º–æ–¥", d:"‡§∂‡§¨‡•ç‡§¶‡§ï‡•ã‡§∂ URL", s:"‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§®", ms:"–ú–∞—Å—Ç–µ—Ä", t:"‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ", a:"‡§ë‡§°‡§ø‡§Ø‡•ã", i:"‡§ö‡§ø‡§§‡•ç‡§∞", f:"‡§´‡§º–∞–π–ª ‡§ö‡•Å‡§®‡•á‡§Ç", sl:"‡§ß‡•Ä–º–∞ 0.8x" },
        ar: { n:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", l:"ÿßŸÑŸÑÿ∫ÿ©", m:"ÿßŸÑŸÖŸàÿßÿØ", md:"ÿßŸÑŸàÿ∂ÿπ", d:"ŸÇÿßŸÖŸàÿ≥ URL", s:"ÿØÿ±ÿßÿ≥ÿ©", ms:"ŸÖÿß—Å—Ç–µ—Ä", t:"ÿßÿÆÿ™ÿ®ÿßÿ±", a:"ÿµŸàÿ™", i:"ÿµŸàÿ±ÿ©", f:"ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ", sl:"ÿ®ÿ∑Ÿäÿ° 0.8x" },
        fr: { n:"Fran√ßais", l:"Langue", m:"Mat√©riels", md:"Mode", d:"URL Dictionnaire", s:"√âtude", ms:"Ma√Ætre", t:"Test", a:"Audio", i:"Image", f:"Choisir un fichier", sl:"Lent 0.8x" },
        es: { n:"Espa√±ol", l:"Idioma", m:"Materiales", md:"Modo", d:"URL Diccionario", s:"Estudo", ms:"Maestro", t:"Prueba", a:"Audio", i:"Imagen", f:"Elegir archivo", sl:"Lento 0.8x" },
        it: { n:"Italiano", l:"Lingua", m:"Materiali", md:"Modo", d:"URL Dizionario", s:"Studio", ms:"Master", t:"Test", a:"Audio", i:"Immagine", f:"Scegli file", sl:"Lento 0.8x" }
    };

    function updateUI() {
        const t = langs[document.getElementById('langSelect').value];
        document.getElementById('l-lang').innerText = t.l; document.getElementById('l-mat').innerText = t.m;
        document.getElementById('l-mode').innerText = t.md; document.getElementById('l-dict').innerText = t.d;
        document.getElementById('l-aud').innerText = t.a; document.getElementById('l-img').innerText = t.i;
        document.getElementById('l-slow').innerText = t.sl; document.getElementById('opt-study').innerText = t.s;
        document.getElementById('opt-master').innerText = t.ms; document.getElementById('opt-test').innerText = t.t;
        ['f-mat-n', 'f-aud-n', 'f-img-n'].forEach(id => { if(document.getElementById(id).innerText.includes('üìÅ')) document.getElementById(id).innerText = "üìÅ " + t.f; });
    }

    function toggleDrawer(type) { document.body.classList.remove('dict-open', 'mat-open'); document.body.classList.add(type + '-open'); }
    
    function setDict(v) { 
        let url = v.trim() || DEFAULT_DICT;
        if(!url.startsWith('http')) url = 'https://' + url;
        document.getElementById('dict-frame').src = url; 
        toggleDrawer('dict');
    }
    
    function resetDict() { document.getElementById('u-dict').value = DEFAULT_DICT; setDict(DEFAULT_DICT); }
    
    function setMat(v) { 
        if(!v) return;
        let url = (v.startsWith('http')) ? v : 'https://' + v;
        document.getElementById('mat-frame').src = url; 
        toggleDrawer('mat'); 
    }

    function setAudio(v) { if(v) { audioObj.src = v; console.log("Audio URL Loaded:", v); } }
    
    function setImg(v) { 
        if(v) { 
            const cover = document.getElementById('cover');
            cover.style.backgroundImage = `url(${v})`; 
            cover.innerText = ''; 
        } 
    }

    function handleFile(input, type) { 
        if(!input.files[0]) return;
        const url = URL.createObjectURL(input.files[0]);
        if(type === 'mat') { document.getElementById('mat-frame').src = url; document.getElementById('f-mat-n').innerText = input.files[0].name; toggleDrawer('mat'); }
        if(type === 'aud') { audioObj.src = url; document.getElementById('f-aud-n').innerText = input.files[0].name; }
        if(type === 'img') { setImg(url); document.getElementById('f-img-n').innerText = input.files[0].name; }
    }

    function clearMat() { document.getElementById('u-mat').value=''; document.getElementById('f-mat-n').innerText='üìÅ'; document.getElementById('mat-frame').src='about:blank'; updateUI(); }
    function updateFileName(i, id) { if(i.files[0]) document.getElementById(id).innerText = i.files[0].name; }
    function clearInp(id) { document.getElementById(id).innerText = "üìÅ " + langs[document.getElementById('langSelect').value].f; }

    const sel = document.getElementById('langSelect');
    Object.keys(langs).forEach(c => sel.add(new Option(langs[c].n, c)));
    sel.value = 'ru'; resetDict(); updateUI();
</script>
</body>
</html>
