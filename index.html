<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Studio EDU Global</title>
    <style>
        :root {
            --primary-color: #6c5ce7;
            --bg-gradient: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
            --panel-bg: #ffffff;
            --accent-bg: #fafafa;
            --text-main: #333;
        }

        body.dark-mode {
            --bg-gradient: linear-gradient(135deg, #2d3436 0%, #000000 100%);
            --panel-bg: #1e1e1e;
            --accent-bg: #2d2d2d;
            --text-main: #f0f0f0;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            transition: 0.3s;
        }

        .container {
            display: grid;
            grid-template-columns: 350px 500px;
            gap: 25px;
            padding: 20px;
        }

        .panel {
            background: var(--panel-bg);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h2 { font-size: 1.2rem; margin-top: 0; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; }

        .form-group { margin-bottom: 12px; }
        label { display: block; font-size: 0.75rem; color: #888; margin-bottom: 4px; font-weight: 600; }
        
        select, input[type="file"], input[type="text"] {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: var(--accent-bg);
            color: var(--text-main);
            font-size: 0.85rem;
            box-sizing: border-box;
        }

        .btn {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            border: none;
            border-radius: 10px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: 0.2s;
        }

        .btn:hover { filter: brightness(1.1); transform: translateY(-1px); }
        .btn.recording { background: #ff4757; animation: pulse 1.5s infinite; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }

        .player-display { display: flex; flex-direction: column; align-items: center; }
        
        .cover-art {
            width: 100%;
            height: 240px;
            background: #eee url('https://images.unsplash.com/photo-1470225620780-dba8ba36b745?q=80&w=500&auto=format') center/cover;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 5px solid var(--panel-bg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        canvas {
            width: 100%;
            height: 60px;
            background: var(--accent-bg);
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .controls { display: flex; gap: 15px; margin-bottom: 15px; }
        .control-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress-box { width: 100%; text-align: center; }
        input[type="range"] { width: 100%; accent-color: var(--primary-color); cursor: pointer; }
        .time-display { font-size: 0.85rem; color: var(--text-main); margin-bottom: 5px; font-family: monospace; }

        .download-link {
            text-align: center;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: bold;
            display: none;
            padding: 8px;
            border: 2px dashed var(--primary-color);
            border-radius: 10px;
            margin-top: 10px;
        }

        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <div class="panel">
        <h2 id="ui-title">üì± Audio Studio EDU</h2>
        
        <div class="form-group">
            <label id="lbl-lang">üåê –í—ã–±–æ—Ä —è–∑—ã–∫–∞</label>
            <select id="langSelect">
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="en">English</option>
                <option value="zh">‰∏≠Êñá (–ö–∏—Ç–∞–π—Å–∫–∏–π)</option>
                <option value="es">Espa√±ol (–ò—Å–ø–∞–Ω—Å–∫–∏–π)</option>
                <option value="de">Deutsch (–ù–µ–º–µ—Ü–∫–∏–π)</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (–•–∏–Ω–¥–∏)</option>
                <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (–ê—Ä–∞–±—Å–∫–∏–π)</option>
                <option value="fa">ŸÅÿßÿ±ÿ≥€å (–§–∞—Ä—Å–∏)</option>
                <option value="pt">Portugu√™s (–ü–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏–π)</option>
                <option value="ja">Êó•Êú¨Ë™û (–Ø–ø–æ–Ω—Å–∫–∏–π)</option>
                <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (–ü–∞–Ω–¥–∂–∞–±–∏)</option>
                <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (–ë–µ–Ω–≥–∞–ª—å—Å–∫–∏–π)</option>
                <option value="fr">Fran√ßais (–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π)</option>
                <option value="th">‡πÑ‡∏ó‡∏¢ (–¢–∞–π—Å–∫–∏–π)</option>
                <option value="tr">T√ºrk√ße (–¢—É—Ä–µ—Ü–∫–∏–π)</option>
                <option value="ko">ÌïúÍµ≠Ïñ¥ (–ö–æ—Ä–µ–π—Å–∫–∏–π)</option>
                <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨ (–ì—Ä–µ—á–µ—Å–∫–∏–π)</option>
                <option value="prs">ÿØÿ±€å (–î–∞—Ä–∏)</option>
            </select>
        </div>

        <div class="form-group">
            <label id="lbl-cover-file">üñºÔ∏è –û–±–ª–æ–∂–∫–∞ (–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª)</label>
            <input type="file" id="coverUpload" accept="image/*">
        </div>

        <div class="form-group">
            <label id="lbl-cover-url">üîó –û–±–ª–æ–∂–∫–∞ (–°—Å—ã–ª–∫–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)</label>
            <div style="display:flex; gap:5px;">
                <input type="text" id="coverUrl" placeholder="https://...">
                <button class="btn" id="applyCoverUrl" style="margin:0; width:50px;">OK</button>
            </div>
        </div>

        <div class="form-group">
            <label id="lbl-audio">üéµ –ê—É–¥–∏–æ—Ñ–∞–π–ª</label>
            <input type="file" id="audioUpload" accept="audio/*">
        </div>

        <button class="btn" id="recordBtn"><span id="btn-rec-text">üé§ –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞</span></button>
        
        <div style="margin-top:15px; display:flex; flex-direction:column; gap:8px;">
            <a id="downloadLink" class="download-link" download="my_audio.webm">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</a>
            <button class="btn" id="iframeBtn" style="background: #a29bfe;"><span id="btn-iframe-text">üì¶ –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ iframe</span></button>
            <button class="btn" id="themeBtn" style="background: #444;"><span id="btn-theme-text">üåì –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É</span></button>
        </div>
    </div>

    <div class="panel player-display">
        <div class="cover-art" id="coverArt"></div>
        <canvas id="visualizer"></canvas>
        
        <div class="progress-box">
            <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
            <input type="range" id="progressBar" value="0" min="0" step="0.1">
        </div>

        <div class="controls">
            <button class="control-btn" id="rewindBtn">‚è™</button>
            <button class="control-btn" id="playBtn">‚ñ∂</button>
            <button class="control-btn" id="forwardBtn">‚è©</button>
        </div>

        <button class="btn" style="background: #8e8e93; margin-top: 10px;"><span id="btn-playlist-text">üìÇ –ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç</span></button>
        <audio id="mainAudio" crossorigin="anonymous"></audio>
    </div>
</div>

<script>
    const translations = {
        ru: { title: "üì± Audio Studio EDU", lblLang: "üåê –í—ã–±–æ—Ä —è–∑—ã–∫–∞", lblCoverFile: "üñºÔ∏è –û–±–ª–æ–∂–∫–∞ (–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª)", lblCoverUrl: "üîó –û–±–ª–æ–∂–∫–∞ (–°—Å—ã–ª–∫–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)", lblAudio: "üéµ –ê—É–¥–∏–æ—Ñ–∞–π–ª", btnRecStart: "üé§ –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞", btnRecStop: "‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å", btnIframe: "üì¶ –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ iframe", btnTheme: "üåì –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É", btnPlaylist: "üìÇ –ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç", download: "‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ–∑–∞–ø–∏—Å—å", copyAlert: "–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!" },
        en: { title: "üì± Audio Studio EDU", lblLang: "üåê Select Language", lblCoverFile: "üñºÔ∏è Cover (Upload)", lblCoverUrl: "üîó Cover (Web Link)", lblAudio: "üéµ Audio File", btnRecStart: "üé§ Start Recording", btnRecStop: "‚èπ Stop Recording", btnIframe: "üì¶ Copy iframe Code", btnTheme: "üåì Toggle Theme", btnPlaylist: "üìÇ Show Playlist", download: "‚¨áÔ∏è Download Audio", copyAlert: "Code copied!" },
        zh: { title: "üì± Èü≥È¢ëÂ∑•‰ΩúÂÆ§ EDU", lblLang: "üåê ÈÄâÊã©ËØ≠Ë®Ä", lblCoverFile: "üñºÔ∏è Â∞ÅÈù¢ (‰∏ä‰º†Êñá‰ª∂)", lblCoverUrl: "üîó Â∞ÅÈù¢ (ÁΩëÈ°µÈìæÊé•)", lblAudio: "üéµ Èü≥È¢ëÊñá‰ª∂", btnRecStart: "üé§ ÂºÄÂßãÂΩïÈü≥", btnRecStop: "‚èπ ÂÅúÊ≠¢ÂΩïÈü≥", btnIframe: "üì¶ Â§çÂà∂ iframe ‰ª£Á†Å", btnTheme: "üåì ÂàáÊç¢‰∏ªÈ¢ò", btnPlaylist: "üìÇ ÊòæÁ§∫Êí≠ÊîæÂàóË°®", download: "‚¨áÔ∏è ‰∏ãËΩΩÂΩïÈü≥", copyAlert: "‰ª£Á†ÅÂ∑≤Â§çÂà∂!" },
        es: { title: "üì± Audio Studio EDU", lblLang: "üåê Seleccionar Idioma", lblCoverFile: "üñºÔ∏è Portada (Subir)", lblCoverUrl: "üîó Portada (Enlace)", lblAudio: "üéµ Archivo de Audio", btnRecStart: "üé§ Iniciar Grabaci√≥n", btnRecStop: "‚èπ Detener Grabaci√≥n", btnIframe: "üì¶ Copiar iframe", btnTheme: "üåì Cambiar Tema", btnPlaylist: "üìÇ Mostrar Lista", download: "‚¨áÔ∏è Descargar Audio", copyAlert: "¬°C√≥digo copiado!" },
        de: { title: "üì± Audio Studio EDU", lblLang: "üåê Sprache W√§hlen", lblCoverFile: "üñºÔ∏è Cover (Hochladen)", lblCoverUrl: "üîó Cover (Web-Link)", lblAudio: "üéµ Audiodatei", btnRecStart: "üé§ Aufnahme Starten", btnRecStop: "‚èπ Aufnahme Stoppen", btnIframe: "üì¶ iframe-Code Kopieren", btnTheme: "üåì Design Umschalten", btnPlaylist: "üìÇ Playlist Anzeigen", download: "‚¨áÔ∏è Audio Herunterladen", copyAlert: "Code kopiert!" },
        hi: { title: "üì± ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§∏‡•ç‡§ü‡•Ç‡§°‡§ø‡§Ø‡•ã EDU", lblLang: "üåê ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç", lblCoverFile: "üñºÔ∏è ‡§ï‡§µ‡§∞ (‡§Ö‡§™‡§≤‡•ã‡§°)", lblCoverUrl: "üîó ‡§ï‡§µ‡§∞ (‡§µ‡•á‡§¨ ‡§≤‡§ø‡§Ç‡§ï)", lblAudio: "üéµ ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§´‡§º‡§æ‡§á‡§≤", btnRecStart: "üé§ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç", btnRecStop: "‚èπ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç", btnIframe: "üì¶ iframe ‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç", btnTheme: "üåì ‡§•‡•Ä‡§Æ ‡§¨‡§¶‡§≤‡•á‡§Ç", btnPlaylist: "üìÇ ‡§™‡•ç‡§≤‡•á‡§≤‡§ø‡§∏‡•ç‡§ü ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç", download: "‚¨áÔ∏è ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç", copyAlert: "‡§ï‡•ã‡§° ‡§ï‡•â‡§™‡•Ä ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!" },
        ar: { title: "üì± ÿßÿ≥ÿ™ŸàÿØŸäŸà ÿßŸÑÿµŸàÿ™ EDU", lblLang: "üåê ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©", lblCoverFile: "üñºÔ∏è ÿ∫ŸÑÿßŸÅ (ÿ™ÿ≠ŸÖŸäŸÑ)", lblCoverUrl: "üîó ÿ∫ŸÑÿßŸÅ (ÿ±ÿßÿ®ÿ∑)", lblAudio: "üéµ ŸÖŸÑŸÅ ÿµŸàÿ™Ÿä", btnRecStart: "üé§ ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ", btnRecStop: "‚èπ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ", btnIframe: "üì¶ ŸÜÿ≥ÿÆ ŸÉŸàÿØ iframe", btnTheme: "üåì ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÖÿ∏Ÿáÿ±", btnPlaylist: "üìÇ ÿπÿ±ÿ∂ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ", download: "‚¨áÔ∏è ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ™", copyAlert: "ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ!" },
        fa: { title: "üì± ÿßÿ≥ÿ™ŸàÿØ€åŸà ÿµŸàÿ™€å EDU", lblLang: "üåê ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤ÿ®ÿßŸÜ", lblCoverFile: "üñºÔ∏è ⁄©ÿßŸàÿ± (ÿ¢ŸæŸÑŸàÿØ)", lblCoverUrl: "üîó ⁄©ÿßŸàÿ± (ŸÑ€åŸÜ⁄© Ÿàÿ®)", lblAudio: "üéµ ŸÅÿß€åŸÑ ÿµŸàÿ™€å", btnRecStart: "üé§ ÿ¥ÿ±Ÿàÿπ ÿ∂ÿ®ÿ∑", btnRecStop: "‚èπ ÿ™ŸàŸÇŸÅ ÿ∂ÿ®ÿ∑", btnIframe: "üì¶ ⁄©Ÿæ€å ⁄©ÿØ iframe", btnTheme: "üåì ÿ™ÿ∫€å€åÿ± ÿ™ŸÖ", btnPlaylist: "üìÇ ŸÜŸÖÿß€åÿ¥ ŸÑ€åÿ≥ÿ™ ŸæÿÆÿ¥", download: "‚¨áÔ∏è ÿØÿßŸÜŸÑŸàÿØ ŸÅÿß€åŸÑ", copyAlert: "⁄©ÿØ ⁄©Ÿæ€å ÿ¥ÿØ!" },
        pt: { title: "üì± Audio Studio EDU", lblLang: "üåê Escolher Idioma", lblCoverFile: "üñºÔ∏è Capa (Carregar)", lblCoverUrl: "üîó Capa (Link)", lblAudio: "üéµ Arquivo de √Åudio", btnRecStart: "üé§ Iniciar Grava√ß√£o", btnRecStop: "‚èπ Parar Grava√ß√£o", btnIframe: "üì¶ Copiar iframe", btnTheme: "üåì Alternar Tema", btnPlaylist: "üìÇ Mostrar Playlist", download: "‚¨áÔ∏è Baixar √Åudio", copyAlert: "C√≥digo copiado!" },
        ja: { title: "üì± „Ç™„Éº„Éá„Ç£„Ç™„Çπ„Çø„Ç∏„Ç™ EDU", lblLang: "üåê Ë®ÄË™ûÈÅ∏Êäû", lblCoverFile: "üñºÔ∏è „Ç´„Éê„ÉºÔºà„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÔºâ", lblCoverUrl: "üîó „Ç´„Éê„ÉºÔºà„É™„É≥„ÇØÔºâ", lblAudio: "üéµ „Ç™„Éº„Éá„Ç£„Ç™„Éï„Ç°„Ç§„É´", btnRecStart: "üé§ Èå≤Èü≥ÈñãÂßã", btnRecStop: "‚èπ Èå≤Èü≥ÂÅúÊ≠¢", btnIframe: "üì¶ iframe„Ç≥„Éº„Éâ„Çí„Ç≥„Éî„Éº", btnTheme: "üåì „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà", btnPlaylist: "üìÇ „Éó„É¨„Ç§„É™„Çπ„Éà„ÇíË°®Á§∫", download: "‚¨áÔ∏è „Ç™„Éº„Éá„Ç£„Ç™„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ", copyAlert: "„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ" },
        pa: { title: "üì± ‡®Ü‡®°‡©Ä‡®ì ‡®∏‡®ü‡©Ç‡®°‡©Ä‡®ì EDU", lblLang: "üåê ‡®≠‡®æ‡®∏‡®º‡®æ ‡®ö‡©Å‡®£‡©ã", lblCoverFile: "üñºÔ∏è ‡®ï‡®µ‡®∞ (‡®Ö‡©±‡®™‡®≤‡©ã‡®°)", lblCoverUrl: "üîó ‡®ï‡®µ‡®∞ (‡®≤‡®ø‡©∞‡®ï)", lblAudio: "üéµ ‡®Ü‡®°‡©Ä‡®ì ‡®´‡®æ‡®à‡®≤", btnRecStart: "üé§ ‡®∞‡®ø‡®ï‡®æ‡®∞‡®°‡®ø‡©∞‡®ó ‡®∏‡®º‡©Å‡®∞‡©Ç ‡®ï‡®∞‡©ã", btnRecStop: "‚èπ ‡®∞‡®ø‡®ï‡®æ‡®∞‡®°‡®ø‡©∞‡®ó ‡®∞‡©ã‡®ï‡©ã", btnIframe: "üì¶ iframe ‡®ï‡©ã‡®° ‡®ï‡®æ‡®™‡©Ä ‡®ï‡®∞‡©ã", btnTheme: "üåì ‡®•‡©Ä‡®Æ ‡®¨‡®¶‡®≤‡©ã", btnPlaylist: "üìÇ ‡®™‡®≤‡©á‡®≤‡®ø‡®∏‡®ü ‡®¶‡®ø‡®ñ‡®æ‡®ì", download: "‚¨áÔ∏è ‡®Ü‡®°‡©Ä‡®ì ‡®°‡®æ‡®ä‡®®‡®≤‡©ã‡®° ‡®ï‡®∞‡©ã", copyAlert: "‡®ï‡©ã‡®° ‡®ï‡®æ‡®™‡©Ä ‡®π‡©ã ‡®ó‡®ø‡®Ü!" },
        bn: { title: "üì± ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶∏‡ßç‡¶ü‡ßÅ‡¶°‡¶ø‡¶ì EDU", lblLang: "üåê ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®", lblCoverFile: "üñºÔ∏è ‡¶ï‡¶≠‡¶æ‡¶∞ (‡¶Ü‡¶™‡¶≤‡ßã‡¶°)", lblCoverUrl: "üîó ‡¶ï‡¶≠‡¶æ‡¶∞ (‡¶≤‡¶ø‡¶ô‡ßç‡¶ï)", lblAudio: "üéµ ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶´‡¶æ‡¶á‡¶≤", btnRecStart: "üé§ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®", btnRecStop: "‚èπ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°‡¶ø‡¶Ç ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®", btnIframe: "üì¶ iframe ‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®", btnTheme: "üåì ‡¶•‡¶ø‡¶Æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®", btnPlaylist: "üìÇ ‡¶™‡ßç‡¶≤‡ßá‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®", download: "‚¨áÔ∏è ‡¶Ö‡¶°‡¶ø‡¶ì ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°", copyAlert: "‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!" },
        fr: { title: "üì± Studio Audio EDU", lblLang: "üåê Choisir la Langue", lblCoverFile: "üñºÔ∏è Couverture (Charger)", lblCoverUrl: "üîó Couverture (Lien)", lblAudio: "üéµ Fichier Audio", btnRecStart: "üé§ D√©marrer l'enregistrement", btnRecStop: "‚èπ Arr√™ter l'enregistrement", btnIframe: "üì¶ Copier le code iframe", btnTheme: "üåì Changer de Th√®me", btnPlaylist: "üìÇ Afficher la Playlist", download: "‚¨áÔ∏è T√©l√©charger l'Audio", copyAlert: "Code copi√© !" },
        th: { title: "üì± ‡∏™‡∏ï‡∏π‡∏î‡∏¥‡πÇ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á EDU", lblLang: "üåê ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤", lblCoverFile: "üñºÔ∏è ‡∏õ‡∏Å (‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î)", lblCoverUrl: "üîó ‡∏õ‡∏Å (‡∏•‡∏¥‡∏á‡∏Å‡πå)", lblAudio: "üéµ ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á", btnRecStart: "üé§ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á", btnRecStop: "‚èπ ‡∏´‡∏¢‡∏∏‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å", btnIframe: "üì¶ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™ iframe", btnTheme: "üåì ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°", btnPlaylist: "üìÇ ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå", download: "‚¨áÔ∏è ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á", copyAlert: "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏•‡πâ‡∏ß!" },
        tr: { title: "üì± Ses St√ºdyosu EDU", lblLang: "üåê Dil Se√ßin", lblCoverFile: "üñºÔ∏è Kapak (Y√ºkle)", lblCoverUrl: "üîó Kapak (Baƒülantƒ±)", lblAudio: "üéµ Ses Dosyasƒ±", btnRecStart: "üé§ Kaydƒ± Ba≈ülat", btnRecStop: "‚èπ Kaydƒ± Durdur", btnIframe: "üì¶ iframe Kodunu Kopyala", btnTheme: "üåì Temayƒ± Deƒüi≈ütir", btnPlaylist: "üìÇ Oynatma Listesi", download: "‚¨áÔ∏è Sesi ƒ∞ndir", copyAlert: "Kod kopyalandƒ±!" },
        ko: { title: "üì± Ïò§ÎîîÏò§ Ïä§ÌäúÎîîÏò§ EDU", lblLang: "üåê Ïñ∏Ïñ¥ ÏÑ†ÌÉù", lblCoverFile: "üñºÔ∏è Ïª§Î≤Ñ (ÏóÖÎ°úÎìú)", lblCoverUrl: "üîó Ïª§Î≤Ñ (ÎßÅÌÅ¨)", lblAudio: "üéµ Ïò§ÎîîÏò§ ÌååÏùº", btnRecStart: "üé§ ÎÖπÏùå ÏãúÏûë", btnRecStop: "‚èπ ÎÖπÏùå Ï§ëÏßÄ", btnIframe: "üì¶ iframe ÏΩîÎìú Î≥µÏÇ¨", btnTheme: "üåì ÌÖåÎßà Î≥ÄÍ≤Ω", btnPlaylist: "üìÇ Ïû¨ÏÉù Î™©Î°ù Î≥¥Í∏∞", download: "‚¨áÔ∏è Ïò§ÎîîÏò§ Îã§Ïö¥Î°úÎìú", copyAlert: "ÏΩîÎìúÍ∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!" },
        el: { title: "üì± Studio ŒâœáŒøœÖ EDU", lblLang: "üåê ŒïœÄŒπŒªŒøŒ≥ŒÆ ŒìŒªœéœÉœÉŒ±œÇ", lblCoverFile: "üñºÔ∏è ŒïŒæœéœÜœÖŒªŒªŒø (ŒúŒµœÑŒ±œÜœåœÅœÑœâœÉŒ∑)", lblCoverUrl: "üîó ŒïŒæœéœÜœÖŒªŒªŒø (Œ£œçŒΩŒ¥ŒµœÉŒºŒøœÇ)", lblAudio: "üéµ ŒëœÅœáŒµŒØŒø ŒâœáŒøœÖ", btnRecStart: "üé§ ŒàŒΩŒ±œÅŒæŒ∑ ŒóœáŒøŒ≥œÅŒ¨œÜŒ∑œÉŒ∑œÇ", btnRecStop: "‚èπ ŒîŒπŒ±Œ∫ŒøœÄŒÆ ŒóœáŒøŒ≥œÅŒ¨œÜŒ∑œÉŒ∑œÇ", btnIframe: "üì¶ ŒëŒΩœÑŒπŒ≥œÅŒ±œÜŒÆ Œ∫œéŒ¥ŒπŒ∫Œ± iframe", btnTheme: "üåì ŒïŒΩŒ±ŒªŒªŒ±Œ≥ŒÆ ŒòŒ≠ŒºŒ±œÑŒøœÇ", btnPlaylist: "üìÇ ŒïŒºœÜŒ¨ŒΩŒπœÉŒ∑ Playlist", download: "‚¨áÔ∏è ŒõŒÆœàŒ∑ ŒâœáŒøœÖ", copyAlert: "Œü Œ∫œéŒ¥ŒπŒ∫Œ±œÇ Œ±ŒΩœÑŒπŒ≥œÅŒ¨œÜŒ∑Œ∫Œµ!" },
        prs: { title: "üì± ÿßÿ≥ÿ™ŸàÿØ€åŸà ÿµŸàÿ™€å EDU", lblLang: "üåê ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤ÿ®ÿßŸÜ", lblCoverFile: "üñºÔ∏è ⁄©ÿßŸàÿ± (ÿ¢ŸæŸÑŸàÿØ)", lblCoverUrl: "üîó ⁄©ÿßŸàÿ± (ŸÑ€åŸÜ⁄©)", lblAudio: "üéµ ŸÅÿß€åŸÑ ÿµŸàÿ™€å", btnRecStart: "üé§ ÿ¥ÿ±Ÿàÿπ ÿ∂ÿ®ÿ∑", btnRecStop: "‚èπ ÿ™ŸàŸÇŸÅ ÿ∂ÿ®ÿ∑", btnIframe: "üì¶ ⁄©Ÿæ€å ⁄©ÿØ iframe", btnTheme: "üåì ÿ™ÿ∫€å€åÿ± ÿ™ŸÖ", btnPlaylist: "üìÇ ŸÜŸÖÿß€åÿ¥ ŸÑ€åÿ≥ÿ™ ŸæÿÆÿ¥", download: "‚¨áÔ∏è ÿØÿßŸÜŸÑŸàÿØ ÿµŸàÿ™", copyAlert: "⁄©ÿØ ⁄©Ÿæ€å ÿ¥ÿØ!" }
    };

    const audio = document.getElementById('mainAudio');
    const playBtn = document.getElementById('playBtn');
    const recordBtn = document.getElementById('recordBtn');
    const langSelect = document.getElementById('langSelect');
    const canvas = document.getElementById('visualizer');
    const ctx = canvas.getContext('2d');

    let audioContext, analyser, source;
    let mediaRecorder, audioChunks = [];

    function updateLanguage() {
        const t = translations[langSelect.value] || translations.en;
        document.getElementById('ui-title').innerText = t.title;
        document.getElementById('lbl-lang').innerText = t.lblLang;
        document.getElementById('lbl-cover-file').innerText = t.lblCoverFile;
        document.getElementById('lbl-cover-url').innerText = t.lblCoverUrl;
        document.getElementById('lbl-audio').innerText = t.lblAudio;
        document.getElementById('btn-rec-text').innerText = (mediaRecorder?.state === "recording") ? t.btnRecStop : t.btnRecStart;
        document.getElementById('btn-iframe-text').innerText = t.btnIframe;
        document.getElementById('btn-theme-text').innerText = t.btnTheme;
        document.getElementById('btn-playlist-text').innerText = t.btnPlaylist;
        document.getElementById('downloadLink').innerText = t.download;
    }
    langSelect.onchange = updateLanguage;

    function initAudio() {
        if (!audioContext) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            source = audioContext.createMediaElementSource(audio);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
            draw();
        }
        if (audioContext.state === 'suspended') audioContext.resume();
    }

    playBtn.onclick = () => {
        if (!audio.src) return;
        initAudio();
        if (audio.paused) {
            audio.play().then(() => playBtn.innerText = '‚è∏');
        } else {
            audio.pause();
            playBtn.innerText = '‚ñ∂';
        }
    };

    document.getElementById('audioUpload').onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
            audio.src = URL.createObjectURL(file);
            audio.load();
            document.getElementById('downloadLink').style.display = "block";
            document.getElementById('downloadLink').href = audio.src;
        }
    };

    document.getElementById('coverUpload').onchange = (e) => {
        if (e.target.files[0]) document.getElementById('coverArt').style.backgroundImage = `url(${URL.createObjectURL(e.target.files[0])})`;
    };

    document.getElementById('applyCoverUrl').onclick = () => {
        const url = document.getElementById('coverUrl').value;
        if (url) document.getElementById('coverArt').style.backgroundImage = `url('${url}')`;
    };

    document.getElementById('themeBtn').onclick = () => document.body.classList.toggle('dark-mode');

    function draw() {
        requestAnimationFrame(draw);
        const data = new Uint8Array(analyser.frequencyBinCount);
        analyser.getByteFrequencyData(data);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#6c5ce7';
        for (let i = 0; i < 80; i++) {
            ctx.fillRect(i * 4, canvas.height, 3, -(data[i] / 4));
        }
    }

    recordBtn.onclick = async () => {
        if (mediaRecorder && mediaRecorder.state === "recording") {
            mediaRecorder.stop();
            recordBtn.classList.remove('recording');
        } else {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
                mediaRecorder.onstop = () => {
                    const blob = new Blob(audioChunks, { type: 'audio/webm' });
                    audio.src = URL.createObjectURL(blob);
                    document.getElementById('downloadLink').style.display = "block";
                    document.getElementById('downloadLink').href = audio.src;
                    updateLanguage();
                };
                mediaRecorder.start();
                recordBtn.classList.add('recording');
                updateLanguage();
            } catch (err) { alert("Microphone Error!"); }
        }
    };

    audio.ontimeupdate = () => {
        document.getElementById('progressBar').max = audio.duration || 0;
        document.getElementById('progressBar').value = audio.currentTime;
        const fmt = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('timeDisplay').innerText = `${fmt(audio.currentTime)} / ${fmt(audio.duration || 0)}`;
    };
    document.getElementById('progressBar').oninput = (e) => audio.currentTime = e.target.value;
    document.getElementById('rewindBtn').onclick = () => audio.currentTime -= 10;
    document.getElementById('forwardBtn').onclick = () => audio.currentTime += 10;

    document.getElementById('iframeBtn').onclick = () => {
        navigator.clipboard.writeText(`<iframe src="${window.location.href}" width="100%" height="700px" frameborder="0"></iframe>`);
        alert(translations[langSelect.value].copyAlert);
    };

    updateLanguage();
</script>
</body>
</html>
